base
====

.. py:module:: base

.. autoapi-nested-parse::

   Protocol definitions for vector store abstractions.

   This module defines the interfaces for vector database operations,
   enabling decoupling from specific implementations like Milvus.



Classes
-------

.. autoapisummary::

   base.VectorStoreConfig
   base.VectorConnection
   base.VectorCollectionManager
   base.VectorDataManager
   base.VectorDatabaseManager
   base.VectorStoreService
   base.SearchStrategy
   base.Reranker


Module Contents
---------------

.. py:class:: VectorStoreConfig

   Bases: :py:obj:`Protocol`


   Configuration protocol for vector store connections.


   .. py:attribute:: uri
      :type:  str


   .. py:attribute:: user
      :type:  Optional[str]


   .. py:attribute:: password
      :type:  Optional[str]


   .. py:attribute:: db_name
      :type:  str


   .. py:attribute:: secure
      :type:  bool


   .. py:attribute:: timeout
      :type:  Optional[float]


   .. py:attribute:: alias
      :type:  str


.. py:class:: VectorConnection

   Bases: :py:obj:`Protocol`


   Protocol for managing vector database connections.


   .. py:method:: connect()

      Establish connection to vector store.



   .. py:method:: ensure()

      Ensure an active connection.



   .. py:method:: disconnect()

      Close the connection.



   .. py:property:: client
      :type: Any


      Get the underlying client.


.. py:class:: VectorCollectionManager

   Bases: :py:obj:`Protocol`


   Protocol for collection-level operations.


   .. py:method:: ensure_collection(name, schema, *, index_params = None, load = True, shards_num = 2)

      Create collection if missing, with optional index and load.



   .. py:method:: drop_collection(name)

      Drop a collection if it exists.



   .. py:method:: load(name)

      Load collection into memory.



   .. py:method:: release(name)

      Release collection from memory.



   .. py:method:: create_index(name, field_name, index_params)

      Create an index on a field.



.. py:class:: VectorDataManager

   Bases: :py:obj:`Protocol`


   Protocol for data operations (CRUD).


   .. py:method:: insert(collection_name, data, *, partition_name = None, timeout = None)

      Insert entities into collection.



   .. py:method:: upsert(collection_name, data, *, partition_name = None, timeout = None)

      Upsert entities if supported.



   .. py:method:: delete(collection_name, expr, *, timeout = None)

      Delete entities matching expression.



   .. py:method:: search(collection_name, data, anns_field, param, limit, *, output_fields = None, expr = None, partition_names = None, timeout = None, consistency_level = None)

      Perform vector search.



   .. py:method:: query(collection_name, expr, *, output_fields = None, limit = None, offset = None, timeout = None, consistency_level = None)

      Run scalar query.



   .. py:method:: flush(collection_name)

      Flush pending data.



.. py:class:: VectorDatabaseManager

   Bases: :py:obj:`Protocol`


   Protocol for database-level operations.


   .. py:method:: list_databases()

      List available databases.



   .. py:method:: create_database(name)

      Create database if not exists.



   .. py:method:: drop_database(name, *, force = False)

      Drop a database.



.. py:class:: VectorStoreService

   Bases: :py:obj:`Protocol`


   High-level protocol for vector store facade.


   .. py:attribute:: connection
      :type:  VectorConnection


   .. py:attribute:: databases
      :type:  VectorDatabaseManager


   .. py:attribute:: collections
      :type:  VectorCollectionManager


   .. py:attribute:: data
      :type:  VectorDataManager


   .. py:method:: ensure_database(name)

      Ensure database exists.



   .. py:method:: ensure_collection(name, schema, **kwargs)

      Ensure collection exists and loaded.



   .. py:method:: drop_collection(name)

      Drop collection.



   .. py:method:: insert(collection_name, data, **kwargs)

      Insert rows.



   .. py:method:: search(collection_name, vectors, anns_field, param, limit, **kwargs)

      Run vector search.



.. py:class:: SearchStrategy

   Bases: :py:obj:`Protocol`


   Protocol for search implementations (vector, keyword, hybrid).


   .. py:method:: search(query, *, top_k = 5, **kwargs)

      Execute search and return ranked results.



.. py:class:: Reranker

   Bases: :py:obj:`Protocol`


   Protocol for reranking search results.


   .. py:method:: rerank(query, results, top_k)

      Rerank results and return top_k.



