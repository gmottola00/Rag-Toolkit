src.rag_toolkit.core.chunking.types
===================================

.. py:module:: src.rag_toolkit.core.chunking.types

.. autoapi-nested-parse::

   Core chunking types used across the application.

   This module defines Protocol-based abstractions for chunking functionality,
   allowing domain layers to extend with specific implementations while maintaining
   type safety and flexibility.

   The Protocol pattern (PEP 544) enables structural subtyping without inheritance,
   allowing implementations to add domain-specific fields while conforming to the
   core interface contract.



Attributes
----------

.. autoapisummary::

   src.rag_toolkit.core.chunking.types.Chunk
   src.rag_toolkit.core.chunking.types.TokenChunk


Classes
-------

.. autoapisummary::

   src.rag_toolkit.core.chunking.types.ChunkLike
   src.rag_toolkit.core.chunking.types.TokenChunkLike


Module Contents
---------------

.. py:class:: ChunkLike

   Bases: :py:obj:`Protocol`


   Protocol defining the interface for document chunks.

   This Protocol allows domain layers to implement their own chunk types
   with additional fields while maintaining compatibility with core chunking logic.

   Example domain implementation:
       ```python
       @dataclass
       class TenderChunk:
           id: str
           title: str
           heading_level: int
           text: str
           blocks: List[Dict[str, Any]]
           page_numbers: List[int]
           # Domain-specific fields
           tender_id: str
           lot_id: Optional[str]
           section_type: str

           def to_dict(self, *, include_blocks: bool = True) -> Dict[str, Any]:
               data = {
                   "id": self.id,
                   "title": self.title,
                   "heading_level": self.heading_level,
                   "text": self.text,
                   "page_numbers": self.page_numbers,
                   "tender_id": self.tender_id,
                   "lot_id": self.lot_id,
                   "section_type": self.section_type,
               }
               if include_blocks:
                   data["blocks"] = self.blocks
               return data
       ```

   .. attribute:: id

      Unique identifier for the chunk

   .. attribute:: title

      Section title or heading

   .. attribute:: heading_level

      Hierarchical level of the heading (e.g., h1=1, h2=2)

   .. attribute:: text

      The actual text content of the chunk

   .. attribute:: blocks

      List of structured text blocks within this chunk

   .. attribute:: page_numbers

      List of page numbers where this chunk appears


   .. py:attribute:: id
      :type:  str


   .. py:attribute:: title
      :type:  str


   .. py:attribute:: heading_level
      :type:  int


   .. py:attribute:: text
      :type:  str


   .. py:attribute:: blocks
      :type:  List[Dict[str, Any]]


   .. py:attribute:: page_numbers
      :type:  List[int]


   .. py:method:: to_dict(*, include_blocks = True)

      Convert chunk to dictionary representation.

      :param include_blocks: Whether to include the blocks field in the output

      :returns: id, title, heading_level, text,
                page_numbers. Implementations may include additional fields.
      :rtype: Dictionary containing at minimum



.. py:class:: TokenChunkLike

   Bases: :py:obj:`Protocol`


   Protocol defining the interface for token-optimized chunks.

   Token chunks are optimized for embedding and retrieval operations,
   typically derived from larger document chunks with enhanced metadata.

   Example domain implementation:
       ```python
       @dataclass
       class TenderTokenChunk:
           id: str
           text: str
           section_path: str
           metadata: Dict[str, str]
           page_numbers: List[int]
           source_chunk_id: str
           # Domain-specific fields
           tender_id: str
           lot_id: Optional[str]
           section_type: str

           def to_dict(self) -> Dict[str, Any]:
               return {
                   "id": self.id,
                   "text": self.text,
                   "section_path": self.section_path,
                   "metadata": self.metadata,
                   "page_numbers": self.page_numbers,
                   "source_chunk_id": self.source_chunk_id,
                   "tender_id": self.tender_id,
                   "lot_id": self.lot_id,
                   "section_type": self.section_type,
               }
       ```

   .. attribute:: id

      Unique identifier for the token chunk

   .. attribute:: text

      The token-optimized text content

   .. attribute:: section_path

      Hierarchical path to the section (e.g., "Section 1 > Subsection A")

   .. attribute:: page_numbers

      List of page numbers where this chunk appears

   .. attribute:: metadata

      Additional metadata as key-value pairs

   .. attribute:: source_chunk_id

      Reference to the original Chunk this was derived from


   .. py:attribute:: id
      :type:  str


   .. py:attribute:: text
      :type:  str


   .. py:attribute:: section_path
      :type:  str


   .. py:attribute:: metadata
      :type:  Dict[str, str]


   .. py:attribute:: page_numbers
      :type:  List[int]


   .. py:attribute:: source_chunk_id
      :type:  str


   .. py:method:: to_dict()

      Convert token chunk to dictionary representation.

      :returns: id, text, section_path, metadata,
                page_numbers, source_chunk_id. Implementations may include additional fields.
      :rtype: Dictionary containing at minimum



.. py:data:: Chunk

.. py:data:: TokenChunk

