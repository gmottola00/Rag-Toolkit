src.rag_toolkit.core.ingestion.service
======================================

.. py:module:: src.rag_toolkit.core.ingestion.service

.. autoapi-nested-parse::

   Generic document ingestion service with dependency injection.

   This service orchestrates document parsing, OCR, and language detection
   without knowing about concrete implementations. All dependencies are injected.



Classes
-------

.. autoapisummary::

   src.rag_toolkit.core.ingestion.service.IngestionService


Module Contents
---------------

.. py:class:: IngestionService(pdf_parser, docx_parser, ocr_engine = None, lang_detector = None, ocr_text_threshold = 200)

   High-level orchestrator for document ingestion.

   This service coordinates parsing, OCR, and language detection
   using injected dependencies (dependency injection pattern).

   :param pdf_parser: Parser implementation for PDF files
   :param docx_parser: Parser implementation for DOCX files
   :param ocr_engine: Optional OCR engine for image-based PDFs
   :param lang_detector: Optional language detector for extracted text
   :param ocr_text_threshold: Minimum text length before skipping OCR


   .. py:attribute:: pdf_parser


   .. py:attribute:: docx_parser


   .. py:attribute:: ocr_engine
      :value: None



   .. py:attribute:: lang_detector
      :value: None



   .. py:attribute:: ocr_text_threshold
      :value: 200



   .. py:method:: parse_document(path, doc_id = None)

      Parse a document file (PDF or DOCX) into structured data.

      :param path: Path to the document file
      :param doc_id: Optional document ID (auto-generated if not provided)

      :returns:     - doc_id: Unique document identifier
                    - filename: Original filename
                    - language: Detected language code
                    - pages: List of parsed pages with blocks
      :rtype: Dictionary containing

      :raises ValueError: If file extension is not supported
      :raises FileNotFoundError: If file does not exist



