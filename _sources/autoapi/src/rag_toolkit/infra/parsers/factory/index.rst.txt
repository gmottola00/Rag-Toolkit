src.rag_toolkit.infra.parsers.factory
=====================================

.. py:module:: src.rag_toolkit.infra.parsers.factory

.. autoapi-nested-parse::

   Factory for creating fully configured IngestionService with concrete implementations.

   This factory is the main entry point for production code that needs document ingestion.
   It wires together all concrete implementations from infra/ with the generic service from core/.



Functions
---------

.. autoapisummary::

   src.rag_toolkit.infra.parsers.factory.create_ingestion_service
   src.rag_toolkit.infra.parsers.factory.create_lightweight_ingestion_service


Module Contents
---------------

.. py:function:: create_ingestion_service(*, enable_ocr = True, detect_headings = True, detect_tables = True, ocr_text_threshold = 200, lang_model_path = None, lang_max_chars = 5000)

   Create a fully configured IngestionService with production implementations.

   This is the recommended way to instantiate IngestionService for production use.
   All concrete implementations are wired together here.

   :param enable_ocr: Whether to enable OCR for image-based PDFs (default: True)
   :param detect_headings: Whether to detect heading structures in PDFs (default: True)
   :param detect_tables: Whether to detect tables in PDFs (default: True)
   :param ocr_text_threshold: Minimum text chars before skipping OCR (default: 200)
   :param lang_model_path: Optional path to fastText language model
   :param lang_max_chars: Max characters for language detection (default: 5000)

   :returns: Configured IngestionService ready to parse documents

   .. admonition:: Example

      >>> from rag_toolkit.infra.parsers.factory import create_ingestion_service
      >>> service = create_ingestion_service(enable_ocr=True)
      >>> result = service.parse_document("document.pdf")
      >>> print(result["language"])
      'en'


.. py:function:: create_lightweight_ingestion_service()

   Create a lightweight IngestionService without OCR or language detection.

   Useful for testing or when processing text-based documents only.

   :returns: Minimal IngestionService configuration


