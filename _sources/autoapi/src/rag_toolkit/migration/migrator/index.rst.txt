src.rag_toolkit.migration.migrator
==================================

.. py:module:: src.rag_toolkit.migration.migrator

.. autoapi-nested-parse::

   Core migration functionality for vector stores.



Attributes
----------

.. autoapisummary::

   src.rag_toolkit.migration.migrator.DEFAULT_MAX_RETRIES
   src.rag_toolkit.migration.migrator.DEFAULT_RETRY_DELAY
   src.rag_toolkit.migration.migrator.DEFAULT_RETRY_BACKOFF
   src.rag_toolkit.migration.migrator.logger


Classes
-------

.. autoapisummary::

   src.rag_toolkit.migration.migrator.VectorStoreMigrator


Module Contents
---------------

.. py:data:: DEFAULT_MAX_RETRIES
   :value: 3


.. py:data:: DEFAULT_RETRY_DELAY
   :value: 1.0


.. py:data:: DEFAULT_RETRY_BACKOFF
   :value: 2.0


.. py:data:: logger

.. py:class:: VectorStoreMigrator(source, target, on_progress = None, validate = True, max_retries = DEFAULT_MAX_RETRIES, retry_delay = DEFAULT_RETRY_DELAY, retry_backoff = DEFAULT_RETRY_BACKOFF)

   Migrates vector data between different vector store implementations.

   This class provides functionality to migrate vectors, embeddings, and metadata
   from one vector store to another with validation, progress tracking, and
   error handling.

   :param source: Source vector store client
   :param target: Target vector store client
   :param on_progress: Optional callback function called with MigrationProgress
   :param validate: Whether to validate data after migration (default: True)

   .. admonition:: Example

      ```python
      from rag_toolkit.migration import VectorStoreMigrator
      
      migrator = VectorStoreMigrator(
          source=chroma_service,
          target=qdrant_service,
          on_progress=lambda p: print(f"{p.percentage:.1f}% complete"),
      )
      
      result = migrator.migrate(
          collection_name="my_docs",
          batch_size=1000,
      )
      
      print(f"Migrated {result.vectors_migrated} vectors in {result.duration_seconds}s")
      ```


   .. py:attribute:: source


   .. py:attribute:: target


   .. py:attribute:: on_progress
      :value: None



   .. py:attribute:: validate
      :value: True



   .. py:attribute:: max_retries
      :value: 3



   .. py:attribute:: retry_delay
      :value: 1.0



   .. py:attribute:: retry_backoff
      :value: 2.0



   .. py:method:: estimate(collection_name, batch_size = 1000)

      Estimate migration time and resource requirements.

      :param collection_name: Name of the collection to migrate
      :param batch_size: Number of vectors per batch

      :returns: MigrationEstimate with estimated metrics

      :raises CollectionNotFoundError: If collection doesn't exist in source



   .. py:method:: migrate(source_collection, target_collection = None, batch_size = 1000, validate = None, filter = None, dry_run = False)

      Migrate all vectors from source to target collection.

      :param source_collection: Name of the collection in source store
      :param target_collection: Name of the collection in target store (defaults to source name)
      :param batch_size: Number of vectors to process per batch
      :param validate: Override instance validation setting
      :param filter: Optional metadata filter to apply (only migrate matching vectors)
      :param dry_run: If True, simulate migration without writing to target

      :returns: MigrationResult with detailed migration statistics

      :raises MigrationError: If migration fails
      :raises CollectionNotFoundError: If source collection doesn't exist



